# For Contributors

## Means of contribution

You can help with this project by

1. Fixing bugs (see issues for bugs)
1. Implementing a library (please post it as an issue first so others know you are working on it)
1. Adding/fixing test cases
1. Introducing new features
1. Discussing and sharing your thoughts (in issues)

## Getting started

If you want to leave your footprints in this project, you can

1. Fork it
1. `git clone` then `npm install`
1. Leave `dist` and `lib` alone, because they are automatically maintained
1. (optional) `grunt` # default task of grunt is to build and watch
1. Make your contribution
1. `grunt build`
1. `grunt test`
1. Commit, push then send a pull request here.

Use `grunt build` to update files in `dist` and `lib` folders.

Use `grunt test` to make sure that you did not break anything.

The syntax parser is generated by [PEG.js](http://pegjs.org). Put your `.pegjs` file in `pegjs/` folder, then use `grunt peg:build` to generate your syntax parser (or just use `grunt build`). The parsers will be created in `lib/` folder under the same name.

I am gradually converting this project to coffeescript. And you are encouraged to use it as well.

Any PR is welcomed.

## Using node-inspector

We need to enable harmony flag to run node-debug. For example, use the following command to debug JSCPP with `test/8.bit.cpp` as input.

`node-debug --nodejs --harmony demo/debug 8bit`

## Remarks

This part contains detailed remarks on this project.

### On fixing bugs

If you find the bug, please post it to issues first before trying to fix. Because it may just be a misuse.

There are 4 phases during an interpretation. Namely, preprocessing syntax parsing, preprocessing handling, syntax parsing, interpretation. And they handled by different modules.

If the bug was not covered by existing test cases, you are highly encouraged to add the test cases for it. See "On adding/fixing test cases" subsection for details.

### On implementing a library

All libraries are located in `src\includes` folder. Each library should export an object with `load` method. You can also use `rt.load("dependency")` to load other libraries. Every library will only be loaded once.

Don't forget to add your library into `launcher.js`.

### On adding/fixing test cases

Each test case is consisted with at least three files: source file(s), input file and output file. Source files should be named as "TestName.pass.cpp" or "TestName.fail.cpp". Input files should be named as "TestName.in" and output files should be named as "TestName.out". If the name of the source file ends with "pass.cpp", the actual output should be exactly same as output file. If it ends with "fail.cpp", the actual output should be different.

### On introducing new features

You should open and issue for enhancement first. Other people can probably give some hints.

### On discussing and sharing your thoughts

Just open an issue for discussion.

